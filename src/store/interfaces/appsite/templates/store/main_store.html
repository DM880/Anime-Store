{% extends 'base.html' %}
{% load static %}

{% block title %}Anime Slash Store{% endblock %}

{% block css %}<link rel="stylesheet" href="{% static 'css/store/main_store.css' %}">{% endblock %}

{% block content %}
{% include 'sort_by.html' %}

<div class="row">

{% for item in all_items %}

<div class="added" id="added{{item.id}}"><div class="img-cart"><img src="/media/{{item.first_image.image}}"></div>
  <div class="details" style="float:right;"><h5 style="margin-top:20px;margin-left:50px;">1</h5><h5 style="margin-left:25px;">{{ item.name }}</h5>
  </div>
</div>

    <div class="item-cont col-lg-3 col-md-4 col-sm-6 col-xs-12">
      <div class="img-cont">
      <a href="{% url 'item_page' item_id=item.id %}"><img class="item-img" src="/media/{{item.first_image.image}}"></a>
      </div>
      <h1 class="item-title">{{ item.name }}</h1>
      <p class="price-txt" style="font-size:15px;">$</p><p class="price-txt" style="font-size:20px;vertical-align: top;">{{ item.price }}</p>
       <br>
      <div style="margin-left:10px;text-align:left;">
                <span class="fa fa-star {% if item.average_review.avg > 0 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if item.average_review.avg > 1 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if item.average_review.avg > 2 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if item.average_review.avg > 3 %} checked {% endif %}"></span>
                <span class="fa fa-star {% if item.average_review.avg > 4 %} checked {% endif %}"></span>
                <p class="price-txt">{{ item.average_review.count | stringformat:".0f" }}
                {% if item.average_review.count == 1 %} review
                {% else %} reviews {% endif %}</p>
  </div>
      <form class="add-to-cart" id="form-item{{item.id}}" method="POST" action="{% url 'add_item' item_id=item.id %}">
        {% csrf_token %}
      <button class="add cart-btn btn btn-success" id="add" data-id="{{item.id}}" type="submit" title="Add to Cart">+</button>
      </form>
    </div>
{% endfor %}
</div>



<div style="width:100%;">
<div class="pagination-div">
{% if all_items.has_other_pages %}
  <ul class="pagination">
    {% if all_items.has_previous %}
      <li><a class="page-n btn btn-outline-danger" href="?page={{ all_items.previous_page_number }}">&laquo;</a></li>
    {% else %}
      <li class="page-n disabled btn btn-outline-danger"><span>&laquo;</span></li>
    {% endif %}
    {% for i in all_items.paginator.page_range %}
      {% if all_items.number == i %}
        <li class="active current btn btn-outline-danger"><span>{{ i }}</span></li>
      {% else %}
        <li><a class="page-n btn btn-outline-danger" href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}
    {% if all_items.has_next %}
      <li><a class="page-n btn btn-outline-danger" href="?page={{ all_items.next_page_number }}">&raquo;</a></li>
    {% else %}
      <li class="page-n disabled btn btn-outline-danger"><span>&raquo;</span></li>
    {% endif %}
  </ul>
{% endif %}
</div>
</div>

{% include 'footer.html' %}

<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script src="{% static 'js/store/main_store.js' %}"></script>

{% endblock %}